package rules;

import com.ftn.carDiagnostic.model.fix.ElectricalPartsFix;
import com.ftn.carDiagnostic.model.fix.FluidPartsFix
import com.ftn.carDiagnostic.model.RuleReturnTest;
import com.ftn.carDiagnostic.model.fix.MechanicalPartsFix;
import com.ftn.carDiagnostic.model.fix.FuelInjectionPartsFix;
import com.ftn.carDiagnostic.model.fix.AirFlowPartsFix;

//DRUGA GRUPA PRAVILA, NA OSNOVU PROBLEMATICNOG DELA SE PRONALAZI POPRAVKA ZA ISTI

//ELECTRICAL PROBLEMS

rule "Headlight fix"
    when
        $ep: ElectricalParts( isHeadlight() == true );
        $epf: ElectricalPartsFix( getHeadlightFix() != null);
       
    then
    	RuleReturnTest rr = new RuleReturnTest();
    	delete($ep);
    	rr.ruleReturn($epf.getHeadlightFix()); //Pozivam metodu u kojoj ce rule da vrati Fix korisniku na front 
    	

    	//System.out.println($epf.getHeadlightFix());
 end 

rule "Taillight fix"
    when
        $ep: ElectricalParts( isTailLight() == true );
        $epf: ElectricalPartsFix( getTaillightFix() != null);
    then
    	delete($ep);
   		RuleReturnTest rr = new RuleReturnTest();
       rr.ruleReturn($epf.getTaillightFix());
end 

rule "ElectricWindows fix"
    when
        $ep: ElectricalParts( isElectricWindows() == true );
        $epf: ElectricalPartsFix( getElectricWindowsFix() != null);
    then
    	delete($ep);
    	RuleReturnTest rr = new RuleReturnTest();
      	rr.ruleReturn($epf.getElectricWindowsFix());
end 

rule "Battery fix"
    when
        $ep: ElectricalParts( isBattery() == true );
        $epf: ElectricalPartsFix( getBatteryFix() != null);
    then
    	delete($ep);
   		RuleReturnTest rr = new RuleReturnTest();
       	rr.ruleReturn($epf.getBatteryFix());
end 

rule "Electrical fan"
    when
        $ep: ElectricalParts( isElectricFan() == true );
        $epf: ElectricalPartsFix( getElectricFanFix() != null);
    then
    	delete($ep);
   		RuleReturnTest rr = new RuleReturnTest();
       	rr.ruleReturn($epf.getElectricFanFix());
end 



//FLUID problems

//Verovatno samo kondenzacija, proveriti nivo rashladne tecnosti
rule "Coolant fix"
    when
        $fp: FluidParts( isCoolant() == true );
        $epf: FluidPartsFix( getCoolantFix() != null);
    then
    	delete($fp);
    	RuleReturnTest rr = new RuleReturnTest();
       	rr.ruleReturn($epf.getCoolantFix());
end 

//Proveriti da li ima prijavljen problem sa uljem, jer ovo znaci da motor trosi ulje?
rule "Oil fix"
    when
        $fp: FluidParts( isOil() == true );
        $epf: FluidPartsFix( getOilFix() != null);
    then
    	delete($fp);
    	RuleReturnTest rr = new RuleReturnTest();
       	rr.ruleReturn($epf.getOilFix());
end 


		
rule "Freon fix"
	when
		$fp: FluidParts( isFreon() == true );
		$fpf: FluidPartsFix ( getFreonFix() != null );
	then
		delete($fp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($fpf.getFreonFix());
end

//MECHANICAL PART FIX
rule "Brakepad fix"
	when
		$mp: MechanicalParts( isBrakePads() == true);
		$mpf: MechanicalPartsFix( getBrakePadsFix() != null);
	then
		delete($mp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($mpf.getBrakePadsFix());
end

rule "DPF fix"
	when
		$ap: AirFlowParts( isDieselParticulateFilter() );
		$apf: AirFlowPartsFix(getDpfFix() != null);
	then
		delete($ap);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($apf.getDpfFix());
end

rule "Shock absorber fix"
	when
		$mp: MechanicalParts( isShockAbsorber() );
		$mpf: MechanicalPartsFix( getShockAbsorberFix() != null);
	then
		delete($mp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($mpf.getShockAbsorberFix());
end

rule "Brake Disc fix"
	when
		$mp: MechanicalParts( isBrakeDisc() );
		$mpf: MechanicalPartsFix( getBrakeDiscFix() != null);
	then
		delete($mp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($mpf.getBrakeDiscFix());
end


rule "Stabilizer fix"
	when
		$mp: MechanicalParts( isStabilizer() );
		$mpf: MechanicalPartsFix( getStabilizerFix() != null);
	then	
		delete($mp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($mpf.getStabilizerFix());

end

rule "Engine belt fix"
	when
		$mp: MechanicalParts( isEngineBelt() );
		$mpf: MechanicalPartsFix( getEngineBeltFix() != null);
	then	
		delete($mp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($mpf.getEngineBeltFix());

end

//FUEL INJECTION PARTS FIX
rule "Nozzle fix"
	when
		$fip: FuelInjectionParts( isNozzle() );
		$fipf: FuelInjectionPartsFix( getNozzleFix() != null);
	then
		delete($fip);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($fipf.getNozzleFix());
end

//AIRFLOW PARTS FIX
rule "Turbo charger fix"
	when
		$ap: AirFlowParts ( isTurboCharger() );
		$apf: AirFlowPartsFix( getTurboChargerFix() != null);
	then
		delete($ap);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($apf.getTurboChargerFix());
end

rule "Spark plug fix"
	when
		$fp: FuelInjectionParts ( isSparkPlug() );
		$fipf: FuelInjectionPartsFix( getSparkPlugFix() != null);
	then
		delete($fp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($apf.getSparkPlugFix());
end

rule "Dualmassflywheel fix"
	when
		$mp: MechanicalParts( isDualMassFlyWheel() );
		$mpf: MechanicalPartsFix( getDualMassFlyWheelFix() != null);
	then	
		delete($mp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($mpf.getDualMassFlyWheelFix());

end

rule "Tyre fix"
	when
		$mp: MechanicalParts( isTyre() );
		$mpf: MechanicalPartsFix( getTyreFix() != null);
	then	
		delete($mp);
		RuleReturnTest rr = new RuleReturnTest();
		rr.ruleReturn($mpf.getTyreFix());

end




	


